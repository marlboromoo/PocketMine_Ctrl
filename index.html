<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Pocketmine ctrl : Control script for PocketMine." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Pocketmine ctrl</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/marlboromoo/PocketMine_Ctrl">View on GitHub</a>

          <h1 id="project_title">Pocketmine ctrl</h1>
          <h2 id="project_tagline">Control script for PocketMine.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/marlboromoo/PocketMine_Ctrl/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/marlboromoo/PocketMine_Ctrl/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="pocketmine_ctrl" class="anchor" href="#pocketmine_ctrl"><span class="octicon octicon-link"></span></a>PocketMine_Ctrl</h1>

<p>Script to manage <a href="http://www.pocketmine.net/" title="PocketMine">PocketMine</a> server on linux.</p>

<pre><code> ____            _        _   __  __ _            
|  _ \ ___   ___| | _____| |_|  \/  (_)_ __   ___ 
| |_) / _ \ / __| |/ / _ \ __| |\/| | | '_ \ / _ \
|  __/ (_) | (__|   &lt;  __/ |_| |  | | | | | |  __/
|_|   \___/ \___|_|\_\___|\__|_|  |_|_|_| |_|\___|_Ctrl

</code></pre>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Manage PocketMine server with tmux session.</li>
<li>Remap <code>Ctrl+c</code> key to prevent killing PocketMine server.</li>
<li>Control script with convenient functions(see <a href="#usage">below</a>).</li>
<li>...</li>
</ul><h2>
<a name="requirments" class="anchor" href="#requirments"><span class="octicon octicon-link"></span></a>Requirments</h2>

<ul>
<li><a href="http://www.pocketmine.net/" title="PocketMine">BASH</a></li>
<li><a href="http://tiswww.case.edu/php/chet/bash/bashtop.html" title="BASH">tmux</a></li>
</ul><h2>
<a name="install-with-pocketmine" class="anchor" href="#install-with-pocketmine"><span class="octicon octicon-link"></span></a>Install with PocketMine</h2>

<div class="highlight highlight-bash"><pre>su - pocketmine
<span class="c">#. install PocketMine-MP</span>
mkdir -p ~/pocketmine
<span class="nb">cd</span> ~/pocketmine
<span class="nv">pmmp_version</span><span class="o">=</span><span class="k">$(</span>curl -s <span class="se">\</span>
https://api.github.com/repos/PocketMine/PocketMine-MP/tags?callback<span class="o">=</span>loadTags |<span class="se">\</span>
grep -i name | head -n1 | cut -d<span class="s1">':'</span> -f2 |<span class="se">\</span>
sed -e <span class="s1">'s/"//g'</span> -e <span class="s1">'s/,$//g'</span> -e <span class="s1">'s/^ //g'</span><span class="k">)</span>
curl -L http://sourceforge.net/projects/pocketmine/files/linux/PocketMine-MP_Installer_<span class="nv">$pmmp_version</span>.sh | bash
<span class="c">#. install PocketMine Ctrl</span>
<span class="nb">cd</span> ~
git clone https://github.com/marlboromoo/PocketMine_Ctrl.git
ln -s ~/PocketMine_Ctrl/pocketmine.sh ~/pocketmine/
~/pocketmine/pocketmine.sh
</pre></div>

<h2>
<a name="update" class="anchor" href="#update"><span class="octicon octicon-link"></span></a>Update</h2>

<div class="highlight highlight-bash"><pre>su - pocketmine
<span class="nb">cd</span>  ~/PocketMine_Ctrl/
git pull
</pre></div>

<h2>
<a name="config" class="anchor" href="#config"><span class="octicon octicon-link"></span></a>Config</h2>

<p>TODO..</p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Control script for PocketMine server.</p>

<pre><code>./pocketmine.sh 
Usage: pocketmine.sh [CMD]

Available CMDs:
  start                 Start PocketMine server.
  attach                Attach PocketMine server console.
  console               Alias for attach.
  stop                  Stop PocketMine server. (graceful)
  restart               Restart PocketMine server. (graceful)
  kill                  Kill the PocketMine server.
  cmd "MY COMMAND"      Send command to PocketMine server.
  plainlog "LOGFILE"    Strip color code from log file.
  log-rotate            Log rotate.
  remake-world          Regenerate worlds and keep old worlds. (need restart)
  purge-world           Regenerate worlds. (need restart)
</code></pre>

<h2>
<a name="daily-jobs" class="anchor" href="#daily-jobs"><span class="octicon octicon-link"></span></a>Daily Jobs</h2>

<p>Add settings to <code>/etc/crontab</code> like below.</p>

<pre><code># m h dom mon dow user  command
59 23   * * *   pocketmine /home/pocketmine/pocketmine/pocketmine.sh log-rotate
51 0    * * *   pocketmine /home/pocketmine/pocketmine/pocketmine.sh cmd "say Server will restart in 10 minute."
56 0    * * *   pocketmine /home/pocketmine/pocketmine/pocketmine.sh cmd "say Server will restart in 5 minute."
0  1    * * *   pocketmine /home/pocketmine/pocketmine/pocketmine.sh cmd "say Server will restart in 1 minute."
1  1    * * *   pocketmine /home/pocketmine/pocketmine/pocketmine.sh restart
</code></pre>

<h2>
<a name="todo" class="anchor" href="#todo"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>Solution to clear the command in the console.</li>
<li>Bootstrap.</li>
<li>Configuration file.</li>
<li>Updater.</li>
<li>You tell me.</li>
</ul><h2>
<a name="faq" class="anchor" href="#faq"><span class="octicon octicon-link"></span></a>FAQ</h2>

<h3>
<a name="how-do-i-detach-the-console" class="anchor" href="#how-do-i-detach-the-console"><span class="octicon octicon-link"></span></a>How do I detach the console?</h3>

<p>Press <code>Ctrl+a</code>, then press <code>d</code>.</p>

<h3>
<a name="why-do-i-see-lots-of-iamjustaspam-in-the-console-or-command-doesnt-exist-in-the-consolelog" class="anchor" href="#why-do-i-see-lots-of-iamjustaspam-in-the-console-or-command-doesnt-exist-in-the-consolelog"><span class="octicon octicon-link"></span></a>Why do I see lots of "iamjustaspam" in the console or "Command doesn't exist!" in the console.log?</h3>

<p>I need to clear the console input while use the 'cmd' function, but PocketMine
can't handle the <code>Ctrl+b</code>,<code>Ctrl+e</code> or <code>UP</code>/<code>Down</code>/<code>LEFT</code>/<code>RIGHT</code> keys 
<a href="https://github.com/PocketMine/PocketMine-MP/issues/773" title="issue">right now</a>, so sending a spam instead, it will be fixed in the future.</p>

<h3>
<a name="i-cant-understand-what-you-say" class="anchor" href="#i-cant-understand-what-you-say"><span class="octicon octicon-link"></span></a>I can't understand what you say!</h3>

<p>Because the English is't my native language, sorry :(</p>

<h2>
<a name="author" class="anchor" href="#author"><span class="octicon octicon-link"></span></a>Author</h2>

<p>Timothy.Lee a.k.a MarlboroMoo.</p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Released under the <a href="http://opensource.org/licenses/MIT" title="MIT License">MIT License</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Pocketmine ctrl maintained by <a href="https://github.com/marlboromoo">marlboromoo</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
